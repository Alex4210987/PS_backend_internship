- [实现简单 Web 服务端](#实现简单-web-服务端)
  - [注意事项](#注意事项)
  - [开始之前](#开始之前)
  - [必做任务](#必做任务)
    - [Task 1 (20%)](#task-1-20)
    - [Task 2 (15%)](#task-2-15)
    - [Task 3 (10%)](#task-3-10)
    - [Task 4 (15%)](#task-4-15)
    - [Task 5 (10%)](#task-5-10)
  - [选做任务](#选做任务)
    - [Task \*](#task-)
    - [Task A](#task-a)
  - [参考资料](#参考资料)
  - [评分标准](#评分标准)
        

实现简单 Web 服务端
============

注意事项
----

*   要求使用 Java 或者 Golang 进行实现，对于新编程语言的学习过程将被纳入实习评测内容。
    
*   使用 Markdown 记录每日所学和项目进度。
    
*   使用 Git 和 GitHub 管理代码和日志（最好每天 push 方便我们跟踪进度）。
    
*   并不要求每一个同学要把任务全部做完，我们更注重学习和成长的过程。
    

开始之前
----

为了简化开发难度，本实习任务将面向[百度地图开放平台](https://lbs.baidu.com/index.php?title=webapi) （这是一个超链接，可以点击它进入对应的链接页面）进行。

可能需要的知识储备：HTTP 协议、RESTFUL API、JSON 数据格式、数据库的使用、面向对象的编程范式。

需要的技能：基本掌握所选择的开发语言、熟悉支持该开发语言的 HTTP 开发包的使用、JSON 序列化⼯具包、支持该开发语言的数据库驱动 API、 Git 的使用等。

十分不建议把以上每个知识全部搞懂之后再开始开发，有个基本概念之后入手在任务中遇到时再进一步学习是非常有效的方法。

必做任务
----

对于一切都还不够熟悉的新手们，让我们一起开始这激动人心的 Web 程序开发吧。

以下属于基本任务，必须全部完成之后才能完成选做任务。

### Task 1 (20%)

阅读“百度地图开放平台”文档，申请注册并获取 AK(Access Key)。

AK 不可以明文存放在代码中，必须通过环境变量等方式进行获取。

通过正确构建 HTTP Request, 实现 [轨迹重合率分析](https://lbsyun.baidu.com/index.php?title=webapi/guide/trackmatch) 的API的调用，并通过正确的解析 HTTP Response，获取 API 返回结果中的 "status" 和 "similarity"，并输出。

### Task 2 (15%)

通过正确构建 HTTP Request，实现 [实时路况查询](https://lbs.baidu.com/index.php?title=webapi/traffic) 和四种 [轻量级路线规划](https://lbs.baidu.com/index.php?title=webapi/directionlite-v1) ：驾车、骑行、步行、公交路线的 API 的调用，并通过正确的解析 HTTP Response，获取 API 返回信息，并支持用户输入和个性化的输出格式。

*   用户输入指：Request 的构建可以通过用户的输入来改变参数。
    
*   个性化的输出格式指：提供多个输出模式，比如仅输出路线时间、额外输出转站点、形式化的路线输出（ `A(起点)->B(换乘)-> D ->C(终点站)` 这种输出格式即可）。
    

### Task 3 (10%)

通过正确构建 HTTP Request，实现 [地理编码](https://lbs.baidu.com/index.php?title=webapi/guide/webservice-geocoding) 的 API 的调用，通过正确解析 HTTP Response，获取 API 返回结果中的经纬度。

由此将 Task 2 中用户输入进一步简化为具体的地址而非经纬度，并且通过实时路况查询，将路线规划中可能出现的拥堵情况进行提示，并将其通过一定的加权赋值，把路线规划中的预计时间进行修正。

具体来说，假设路线规划中预计时间为1H 1H ，路况为“畅行”时通行时间不变，路况为“拥堵”时通行时间增加 40\%。通过实时路况查询，所规划的路线中有 60\% 是“畅行”，有 40\% 路线的情况为“拥堵”。那么这一段路线规划的预期时间就会变成

1H×60%×1+1H×40%×(1+40%)\=1.16H

修正之后依旧要支持 Task 2 中的个性化输出格式要求，并且要求同时对比多种输出路线的情况，提供不同程度的拥挤情况、总耗时、路线偏好（此处“路线偏好”同路线规划 API 中的 “路线偏好”参数语义）等条件下的推荐选择。

到此为止，我们已经能够基本实现借助百度地图所提供的 API 实现通过给定输入详细地点而输出多条有用的路线规划。

这没什么了不起，但这个程序与互联网相连。这是你们的第一步，也是颇为重要的一步。

### Task 4 (15%)

我们需要进一步扩展这个 web 程序:假如用户不想联网，想本地查询历史结果，当前的设计就完全无法实现。又或者用户每次都需要从家里规划出到不同地点的位置，他不想每次都输入全名，也许将这种“名字A->全名B”的映射可以极大的方便他。

开发你的应用使其可以将数据持久化―一例如使用 Java 的同学可以使用 JDBC + MySQL 的技术和组件，将数据存入 MySQL 数据库中进行保存。Go 的同学可以使用 database/sql 包对 MySQL 进行访问。

数据的对象包括但不限于是:某个路线查询起终点，用户的某一套特定偏好，用户对于某个地点的别名等一切你可以想象到实际生活中可能会有用的数据。

要求支持对于数据的增删改查的功能。

请参考各语言的 Database Connection API Documents.

### Task 5 (10%)

Task 4 中我们所使用的语言自带的API基本比较复杂，难以长期维护。现在我们需要进一步简化他们的配置和使用―一比如我们可以将一个复杂的数据库记录，映射成为一个对象(Object)。如果映射为一个对象之后，我们的 SQL 语句针对的客体就是这种对象了，和语言本身是一致的。这种技术也被称为 ORM (对象关系映射)，可以具体查看各语言的 ORM 框架了解代码效果和原理。

简单来说，ORM 的特征如下

*   ORM 框架自己维护一个数据库连接
    
*   ORM 框架决定了对象和 SQL 语句之间的映射关系
    
*   ORM 提供简易的操作 API 执行 SQL，返回数据是以对象的形式
    

也就是说，我们上面Task 4通过调用编程语言本身的数据库 API，每次都需要自己申请数据库连接、自己在程序中硬编写 SQL 语句，最后还要将数据解码出来。Task 5 的目标则是在主程序中直接通过调用这个对象的 SQL 函数，传入需要操作的参数进行该操作。

在本次任务中，不要求做到抽象的 ORM，但至少需要 ORM 框架维护一个唯一的数据库连接，通过传入的参数在对具体的对象生成对应的 SQL 并执行，解析返回特定的结果。

选做任务
----

以下任务属于附加任务，在完成所有基本任务的情况下可以选择完成，每个任务有最高 30% 的附加分数。

### Task \*

可以在任务调用的 API 去实现具体的实际需求并提供尽量良好的体验。请注意在这个任务中，简单增加 API 的调用只会得到很少的分数，要考虑实际需求。

可以参考的样例是，必做任务中我们实现了用户输入具体地点，我们通过百度地图 API 的调用，实现了具体地点之间的路线规划并考虑多种条件后输出。而你可以做一个打车的路线规划――获取你现在的位置及目的地你可以获取一个路线的规划，然而打车需要在规定的打车点才能打到。所以你可能会获取周围的打车点，并且通过不同打车点所造成的不同路线的里程和时间，通过自己设定的打车费用算法，给出打车费用和时间综合排序的选择。

### Task A

开发你的应用使其拥有并且具备良好可视化的GUI。可以是网页前端或者 GUI 程序。

参考资料
----

[百度地图开放平台](https://lbs.baidu.com/index.php?title=webapi)、各语言官方文档和需要用到的模块的文档等。

评分标准
----

*   实习表现(包括仓库的维护，提问题交流，实习总结等)(15%)
    
*   新编程语言的学习(15%)
    
*   task 1 (20%)
    
*   task 2 (15%)
    
*   task 3 (10%)
    
*   task 4 (15%)
    
*   task 5 (10%)
    
*   附加任务需要在完成所有基础任务的前提下再去做，每个任务有最高30%附加分